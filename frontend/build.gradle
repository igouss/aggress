plugins {
    id "java"
    id "idea"
    id "com.github.ben-manes.versions" version "0.13.0"// gradle dependencyUpdates
}

ext {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

dependencies {
    compile "ch.qos.logback:logback-core:1.1.7"
    compile "ch.qos.logback:logback-classic:1.1.7"
    compile "junit:junit:4.12"
    compile "org.elasticsearch:elasticsearch:2.3.4"
    compile "com.vividsolutions:jts:1.13"

    compile "io.undertow:undertow-core:1.3.22.Final"
//    compile "io.undertow:undertow-websockets-jsr:1.3.22.Final"
    compile "org.thymeleaf:thymeleaf:3.0.0.RELEASE"
    compile "io.vertx:vertx-core:3.3.2"
    compile project(':common')
}

task frontend(type:JavaExec) {
    description = "Start fronted project"
   main = "com.naxsoft.Server"
   classpath = sourceSets.main.runtimeClasspath
}

task copyLibs(type: Copy) {
    description = "Copy app and all dependencies to build/libs"
    from configurations.compile
    into "$buildDir/libs"
    dependsOn jar
}

task copyBaseDir(type: Copy) {
    description = "Copy basedir to docker"
    from "basedir"
    into "../docker/frontend/basedir"

}

task docker(type: Copy) {
    description = "Copy app and all dependencies to docker/frontend"
    dependsOn copyLibs, copyBaseDir

    from "$buildDir/libs"
    into "../docker/frontend"
}