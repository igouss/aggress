plugins {
    id "java"
    id "idea"
    id "net.ltgt.apt" version "0.21"
}

configurations {
    apt
}
tasks.withType(JavaCompile) {
    options.annotationProcessorPath = configurations.apt
    options.incremental = true
}

/*
https://docs.gradle.org/current/userguide/java_library_plugin.html
*/
dependencies {
    implementation(
            project(':common'),
            project(':storage'),
            fileTree(dir: "libs", include: "*.jar"),
            "ch.qos.logback:logback-classic:1.2.3",
            "ch.qos.logback:logback-core:1.2.3",
            "com.google.code.gson:gson:2.8.6",
            "com.google.dagger:dagger:2.29.1",
            "com.lambdaworks:lettuce:2.3.3",
            "io.dropwizard.metrics:metrics-core:4.1.12.1",
            "io.reactivex:rxjava:1.3.8",
            "io.vertx:vertx-core:3.9.3",
            "javax.inject:javax.inject:1",
            "javax.validation:validation-api:2.0.1.Final",
            "junit:junit:4.13",
            "net.ltgt.gradle:gradle-apt-plugin:0.21",
            "net.sf.jopt-simple:jopt-simple:5.0.4",
            "org.apache.commons:commons-collections4:4.4",
            "org.asynchttpclient:async-http-client:2.12.1",
            "org.jsoup:jsoup:1.13.1",
            "org.reflections:reflections:0.9.12",
            "com.google.guava:guava:29.0-jre",
    )

    apt "com.google.dagger:dagger-compiler:2.29.1"
}

compileJava {
    options.annotationProcessorPath = configurations.apt
}

javadoc {
    options {
        windowTitle = "Aggress Crawler Javadoc ${project.version}"
    }
}

test {
    testLogging.showStandardStreams = true;
    testLogging.showStackTraces = true;
    testLogging.showCauses = true;
    testLogging.showExceptions = true;

    useJUnitPlatform()
}
